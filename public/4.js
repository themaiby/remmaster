(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{AcUx:function(t,e,s){"use strict";s.d(e,"a",function(){return o});class o{constructor(t){this._p=t}build(){const t=this._p;let e={perPage:t.rowsPerPage,page:t.page,sort:t.sortBy,direction:t.descending?"desc":"asc"};return t.filter&&(e=Object.assign({},e,t.filter)),e}}},CDTo:function(t,e,s){"use strict";s.d(e,"a",function(){return r});const o="Admin",n=(t,e)=>!!t.roles&&t.roles.some(t=>t.name===e),a=t=>n(t,o),r={hasRole:n,can:(t,e)=>!!t.roles&&(!!a(t)||t.permissions.some(t=>t.name===e)),isAdmin:a}},IijC:function(t,e,s){"use strict";s.r(e);var o=s("YKMj"),n=s("8dmF"),a=s("YC7Z"),r=s("k3CW"),i=s("CDTo"),l=s("bkeW"),c=s("n0xd"),m=function(t,e,s,o){var n,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,o);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(r=(a<3?n(r):a>3?n(e,s,r):n(e,s))||r);return a>3&&r&&Object.defineProperty(e,s,r),r};let p=class extends o.b{constructor(){super(...arguments),this.headers=[{text:n.a.t("components.title"),value:"title"},{text:n.a.t("components.article"),value:"article"},{text:n.a.t("components.count"),value:"count"},{text:n.a.t("components.cost"),value:"cost"},{text:n.a.t("components.summaryCost"),value:"summary_cost"},{text:n.a.t("components.vendor"),value:"vendor"},{text:n.a.t("components.created_at"),value:"created_at"},{text:"",value:"",sortable:!1}]}beforeCreate(){i.a.can(l.a.currentUser,"components.show")||this.$router.push({name:a.a.errors.notFound})}created(){r.a.setCurrentPageTitle({text:`${n.a.t("components.index")}`,image:"mdi-cart"})}tableWatcher(){c.a.getComponents()}get routeNames(){return a.a}get tableParams(){return c.a.tableParams}set tableParams(t){c.a.setTableParams(t)}get filter(){return this.tableParams.filter}get components(){return c.a.components}get meta(){return c.a.meta}get isRequest(){return c.a.isRequest}resetFilter(){c.a.resetFilter()}deleteComponent(){}refresh(){c.a.getComponents()}};m([Object(o.c)("tableParams")],p.prototype,"tableWatcher",null);var u=p=m([o.a],p),d=(s("wTQV"),s("KHd+")),v=Object(d.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("VToolbar",{staticClass:"components-gradient",attrs:{flat:"",color:"white"}},[s("v-btn",{attrs:{flat:"",icon:""},on:{click:t.refresh}},[s("v-icon",{attrs:{small:""}},[t._v("mdi-refresh")])],1),t._v(" "),s("VSpacer"),t._v(" "),s("VBtn",{staticClass:"mb-2",attrs:{dark:"",color:"blue-grey darken-4",to:{name:t.routeNames.components.create},flat:"",icon:""}},[s("VIcon",[t._v("mdi-plus")])],1),t._v(" "),s("VBtn",{staticClass:"mb-2",attrs:{color:t.filter?"primary":"blue-grey darken-4",dark:"",to:{name:t.routeNames.components.filter},flat:"",icon:""}},[s("VIcon",{attrs:{small:""}},[t._v("\n        mdi-filter\n      ")])],1),t._v(" "),t.filter?s("VBtn",{staticClass:"mb-2",attrs:{small:"",color:"red accent-2",dark:"",flat:"",icon:""},on:{click:t.resetFilter}},[s("VIcon",{attrs:{small:""}},[t._v("\n        mdi-filter-remove\n      ")])],1):t._e()],1),t._v(" "),s("v-data-table",{staticClass:"elevation-24",attrs:{headers:t.headers,items:t.components,pagination:t.tableParams,"total-items":t.meta.total,loading:t.isRequest,"rows-per-page-items":[5,10,25,50,100]},on:{"update:pagination":function(e){t.tableParams=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[s("tr",{key:e.item.id,class:0===e.item.count?"darken":""},[s("td",[t._v(t._s(e.item.title))]),t._v(" "),s("td",[t._v(t._s(e.item.article))]),t._v(" "),s("td",[t._v(t._s(e.item.count))]),t._v(" "),s("td",[t._v(t._s(e.item.cost))]),t._v(" "),s("td",[t._v(t._s(e.item.summary_cost))]),t._v(" "),s("td",[s("router-link",{attrs:{to:{name:t.routeNames.vendors.show,params:{id:e.item.vendor.id}}}},[t._v("\n            "+t._s(e.item.vendor.name)+"\n          ")])],1),t._v(" "),s("td",[t._v(t._s(t._f("moment")(e.item.created_at.date,"DD/MM/YYYY HH:mm:ss")))]),t._v(" "),s("td",{staticClass:"text-xs-right"},[s("v-tooltip",{attrs:{top:""}},[s("router-link",{attrs:{slot:"activator",to:{name:t.routeNames.components.show,params:{id:e.item.id}}},slot:"activator"},[s("VIcon",{attrs:{color:"primary",small:""}},[t._v("\n                mdi-information-outline\n              ")])],1),t._v(" "),s("span",[t._v(t._s(t.$t("components.show")))])],1),t._v(" "),s("v-tooltip",{attrs:{top:""}},[s("router-link",{attrs:{slot:"activator",to:{name:t.routeNames.components.update,params:{id:e.item.id}}},slot:"activator"},[s("VIcon",{attrs:{color:"secondary lighten-1",small:""},on:{click:function(t){}}},[t._v("\n                mdi-pencil\n              ")])],1),t._v(" "),s("span",[t._v(t._s(t.$t("components.update")))])],1),t._v(" "),s("v-tooltip",{attrs:{top:""}},[s("a",{attrs:{slot:"activator",href:"/components/"+e.item.id+"/delete"},on:{click:function(s){t.deleteComponent(e.item.id,s)}},slot:"activator"},[s("VIcon",{attrs:{color:"error",small:""},on:{click:function(t){}}},[t._v("\n                mdi-delete\n              ")])],1),t._v(" "),s("span",[t._v(t._s(t.$t("components.delete")))])])],1)])]}}])},[s("v-progress-linear",{attrs:{slot:"progress",color:"grey",indeterminate:"",height:"2"},slot:"progress"})],1),t._v(" "),s("router-view")],1)},[],!1,null,"f7747dc2",null);v.options.__file="ComponentList.vue";e.default=v.exports},UOIX:function(t,e,s){var o=s("aLMk");"string"==typeof o&&(o=[[t.i,o,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(o,n);o.locals&&(t.exports=o.locals)},aLMk:function(t,e,s){(t.exports=s("JPst")(!1)).push([t.i,"\n.darken[data-v-f7747dc2] {\n  opacity: 0.5;\n}\n.count-warning[data-v-f7747dc2] {\n  background: #ffedf0;\n}\n",""])},n0xd:function(t,e,s){"use strict";s.d(e,"a",function(){return p});var o=s("b8WW"),n=s("3mGx"),a=s("AcUx"),r=s("tAGO"),i=s("uVKr"),l=function(t,e,s,o){var n,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,o);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(r=(a<3?n(r):a>3?n(e,s,r):n(e,s))||r);return a>3&&r&&Object.defineProperty(e,s,r),r},c=function(t,e,s,o){return new(s||(s=Promise))(function(n,a){function r(t){try{l(o.next(t))}catch(t){a(t)}}function i(t){try{l(o.throw(t))}catch(t){a(t)}}function l(t){t.done?n(t.value):new s(function(e){e(t.value)}).then(r,i)}l((o=o.apply(t,e||[])).next())})};let m=class extends o.d{constructor(){super(...arguments),this.component={article:"",cost:0,count:0,title:""},this.components=[],this.isRequest=!1,this.isFilterLoading=!1,this.meta={},this.message="",this.errors=[],this.tableParams={page:1,descending:!1,filter:null,rowsPerPage:Number(localStorage.getItem("componentsPerPage"))||5,sortBy:""},this.availableVendors=[],this.isComponentCreatingRequest=!1}setIsComponentCreatingRequest(t){this.isComponentCreatingRequest=t}setComponents(t){this.components=t}setIsRequest(t){this.isRequest=t}setTableParams(t){t.rowsPerPage&&localStorage.setItem("componentsPerPage",t.rowsPerPage.toString()),this.tableParams=t}setMeta(t){this.meta=t}setMessage(t){this.message=t}resetFilter(){this.tableParams=Object.assign({},this.tableParams,{filter:null})}setFilterLoading(t){this.isFilterLoading=t}setAvailableVendors(t){this.availableVendors=t}setComponent(t){this.component=t}getComponents(){return c(this,void 0,void 0,function*(){this.setIsRequest(!0);try{const t=new a.a(this.tableParams).build(),e=yield r.a.get(i.a.components.index,{params:t});this.setMeta(e.data.meta),this.setComponents(e.data.data)}catch(t){this.setMessage(t.response.data.message)}finally{this.setIsRequest(!1)}})}getAvailableVendors(){return c(this,void 0,void 0,function*(){this.setFilterLoading(!0);try{const t=yield r.a.get(i.a.components.availableVendors);this.setAvailableVendors(t.data.data)}finally{this.setFilterLoading(!1)}})}createComponent(t){return c(this,void 0,void 0,function*(){this.setIsComponentCreatingRequest(!0);try{const e=yield r.a.post(i.a.components.create,t);this.setComponent(e.data.data)}catch(t){this.setMessage(t.response.data.message)}finally{this.setIsComponentCreatingRequest(!1)}})}getComponent(t){return c(this,void 0,void 0,function*(){})}};l([o.c],m.prototype,"setIsComponentCreatingRequest",null),l([o.c],m.prototype,"setComponents",null),l([o.c],m.prototype,"setIsRequest",null),l([o.c],m.prototype,"setTableParams",null),l([o.c],m.prototype,"setMeta",null),l([o.c],m.prototype,"setMessage",null),l([o.c],m.prototype,"resetFilter",null),l([o.c],m.prototype,"setFilterLoading",null),l([o.c],m.prototype,"setAvailableVendors",null),l([o.c],m.prototype,"setComponent",null),l([o.a],m.prototype,"getComponents",null),l([o.a],m.prototype,"getAvailableVendors",null),l([o.a],m.prototype,"createComponent",null),l([o.a],m.prototype,"getComponent",null),m=l([Object(o.b)({name:"components",store:n.a,namespaced:!0,dynamic:!0})],m);const p=Object(o.e)(m)},wTQV:function(t,e,s){"use strict";var o=s("UOIX");s.n(o).a}}]);